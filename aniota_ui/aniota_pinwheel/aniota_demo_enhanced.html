<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Aniota Demo - Learning & Chat</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Noto Sans Rounded', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }
        
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        .demo-header {
            margin-bottom: 30px;
        }
        
        .demo-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #ffb300;
        }
        
        .demo-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .demo-section h2 {
            color: #ffb300;
            margin-bottom: 15px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 179, 0, 0.3);
        }
        
        .feature-card h3 {
            color: #ffb300;
            margin-top: 0;
        }
        
        .demo-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .demo-link {
            background: linear-gradient(135deg, #ffb300, #ff8c00);
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.3s, box-shadow 0.3s;
            border: none;
            cursor: pointer;
        }
        
        .demo-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 179, 0, 0.4);
        }
        
        .stats-display {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }
        
        .stats-display.active {
            display: block;
        }
        
        .orb-instructions {
            background: rgba(255, 179, 0, 0.1);
            border: 2px solid #ffb300;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        
        .orb-instructions h3 {
            color: #ffb300;
            margin-top: 0;
        }
        
        .instruction-item {
            margin: 10px 0;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        .highlight {
            color: #ffb300;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Aniota Orb will appear here -->
    <div id="aniota-mood-circle"></div>
    
    <div class="demo-container">
        <div class="demo-header">
            <h1>ðŸŒŸ Enhanced Aniota Demo</h1>
            <p>Experience the new L+ Learning Moments tracking and AI Chat Interface!</p>
        </div>
        
        <div class="orb-instructions">
            <h3>ðŸŽ¯ Aniota Orb Instructions</h3>
            <div class="instruction-item">
                <strong class="highlight">Left Click:</strong> Move Aniota to center-right position
            </div>
            <div class="instruction-item">
                <strong class="highlight">Right Click:</strong> Open the new Chat Interface
            </div>
            <div class="instruction-item">
                <strong class="highlight">Drag:</strong> Move Aniota anywhere on the screen
            </div>
            <div class="instruction-item">
                <strong class="highlight">Watch:</strong> See Aniota's heartbeat and mood changes
            </div>
        </div>
        
        <div class="demo-section">
            <h2>ðŸŽµ Enhanced Field Experience</h2>
            <p>The Field page now tracks every interaction as Learning Moments (L+), building a comprehensive profile of your learning journey.</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>ðŸ“Š L+ Tracking</h3>
                    <p>Every click, hover, and interaction is recorded as a positive learning moment, building your personalized learning profile.</p>
                </div>
                <div class="feature-card">
                    <h3>ðŸŽ¯ Exploration Score</h3>
                    <p>Discover all 9 elements (8 petals + center) to maximize your exploration score and unlock Aniota's full understanding.</p>
                </div>
                <div class="feature-card">
                    <h3>ðŸŽ¨ Creativity Metrics</h3>
                    <p>Your interaction patterns reveal your creativity and learning style, helping Aniota adapt to you.</p>
                </div>
            </div>
            <div class="demo-links">
                <a href="aniota_pinwheel/aniota_field.html" class="demo-link">ðŸŒ¸ Try Enhanced Field</a>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>ðŸ’¬ AI Chat Interface</h2>
            <p>Aniota can now communicate! She's not just a chatbot - she remembers your learning journey and adapts her responses.</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>ðŸ§  Contextual Responses</h3>
                    <p>Aniota remembers your Field interactions and learning moments, creating personalized responses.</p>
                </div>
                <div class="feature-card">
                    <h3>ðŸŽ­ Mood Integration</h3>
                    <p>Her orb color changes based on your conversation, and her mood affects her responses.</p>
                </div>
                <div class="feature-card">
                    <h3>ðŸ“š Learning Insights</h3>
                    <p>Ask about your progress, get encouragement, or seek help - she knows your learning style.</p>
                </div>
            </div>
            <div class="demo-links">
                <button class="demo-link" onclick="openChat()">ðŸ’¬ Start Chat with Aniota</button>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>ðŸ”¬ Test Both Systems</h2>
            <p>For the best experience, try both features together:</p>
            <ol style="text-align: left; max-width: 600px; margin: 0 auto;">
                <li>First, visit the <strong class="highlight">Enhanced Field</strong> and click around - each interaction creates L+ learning moments</li>
                <li>Then, <strong class="highlight">right-click the Aniota orb</strong> to open chat</li>
                <li>Ask her about your progress - she'll reference your Field activities!</li>
                <li>Try asking: "How am I doing?", "Tell me about music", "What did you learn about me?"</li>
                <li>Watch her orb color change based on your conversation!</li>
            </ol>
        </div>
        
        <div id="stats" class="stats-display">
            <h3>ðŸ“ˆ Current Session Stats</h3>
            <div id="session-stats">
                <p>Loading learning data...</p>
            </div>
        </div>
        
        <div class="demo-links">
            <button class="demo-link" onclick="showStats()">ðŸ“Š View Learning Stats</button>
            <button class="demo-link" onclick="clearStats()">ðŸ”„ Reset Session</button>
        </div>
    </div>
    
    <script src="aniota_unified_presence.js"></script>
    <script>
        // Demo-specific functionality
        
        function openChat() {
            if (window.aniotaPresence) {
                window.aniotaPresence.showChatInterface();
            } else {
                alert('Aniota is still loading! Please wait a moment and try again.');
            }
        }
        
        function showStats() {
            const statsDiv = document.getElementById('stats');
            const statsContent = document.getElementById('session-stats');
            
            // Get learning moments from session
            const learningMoments = JSON.parse(sessionStorage.getItem('aniota_learning_moments') || '[]');
            
            if (learningMoments.length === 0) {
                statsContent.innerHTML = `
                    <p><strong>No learning moments recorded yet!</strong></p>
                    <p>Visit the <a href="aniota_field.html" style="color: #ffb300;">Enhanced Field</a> and start clicking petals to generate learning data.</p>
                `;
            } else {
                // Analyze the data
                const totalMoments = learningMoments.length;
                const uniqueTypes = [...new Set(learningMoments.map(m => m.type))];
                const recentMoment = learningMoments[learningMoments.length - 1];
                const sessionDuration = recentMoment.timeOnPage / 1000 / 60; // minutes
                
                // Count petal clicks specifically
                const petalClicks = learningMoments.filter(m => m.type === 'petal_click');
                const uniquePetals = [...new Set(petalClicks.map(m => m.data?.petalId))].filter(id => id !== undefined);
                
                statsContent.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; text-align: left;">
                        <div><strong>Total L+ Moments:</strong> ${totalMoments}</div>
                        <div><strong>Session Duration:</strong> ${sessionDuration.toFixed(1)} minutes</div>
                        <div><strong>Activity Types:</strong> ${uniqueTypes.length}</div>
                        <div><strong>Petals Explored:</strong> ${uniquePetals.length}/8</div>
                        <div><strong>Last Activity:</strong> ${recentMoment.type.replace('_', ' ')}</div>
                        <div><strong>Engagement Level:</strong> ${totalMoments > 20 ? 'High' : totalMoments > 10 ? 'Medium' : 'Getting Started'}</div>
                    </div>
                    <div style="margin-top: 15px;">
                        <strong>Activity Timeline:</strong>
                        <div style="max-height: 150px; overflow-y: auto; margin-top: 5px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                            ${learningMoments.slice(-10).map(moment => 
                                `<div style="margin: 5px 0; padding: 5px; background: rgba(255,179,0,0.1); border-radius: 3px;">
                                    <strong>${moment.type.replace('_', ' ')}:</strong> 
                                    ${moment.data?.petalId !== undefined ? `Petal ${moment.data.petalId}` : 'General activity'}
                                    <small style="float: right;">${new Date(moment.timestamp).toLocaleTimeString()}</small>
                                </div>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }
            
            statsDiv.classList.toggle('active');
        }
        
        function clearStats() {
            if (confirm('Clear all learning moments from this session? This cannot be undone.')) {
                sessionStorage.removeItem('aniota_learning_moments');
                document.getElementById('stats').classList.remove('active');
                alert('Learning moments cleared! Visit the Field to start generating new data.');
            }
        }
        
        // Add some demo-specific learning moments
        setTimeout(() => {
            if (typeof recordLearningMoment === 'function') {
                recordLearningMoment('demo_page_visit', {
                    page: 'enhanced_demo',
                    features: ['l_plus_tracking', 'ai_chat', 'stats_viewing']
                });
            }
        }, 2000);
        
        // Welcome message after page loads
        setTimeout(() => {
            console.log('ðŸŒŸ Welcome to the Enhanced Aniota Demo!');
            console.log('ðŸ’¬ Right-click the orb to chat with Aniota');
            console.log('ðŸŽµ Visit the Field page to generate learning moments');
            console.log('ðŸ“Š Use the stats button to view your progress');
        }, 1000);
    </script>
</body>
</html>